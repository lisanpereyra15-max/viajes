<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TrasLaDar - Gesti√≥n Pro</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
:root {
    --celeste:#82caff;
    --whatsapp:#25d366;
    --oscuro:#333;
    --blanco:#fff;
}
body{
    margin:0;
    font-family:'Poppins',sans-serif;
    background-color:var(--celeste);
    display:flex;
    flex-direction:column;
    align-items:center;
}
.header-banner{
    width:100%;
    height:180px;
    background:linear-gradient(rgba(0,0,0,.3),rgba(0,0,0,.3)),
    url('https://images.unsplash.com/photo-1449965408869-eaa3f722e40d?q=80&w=2070');
    background-size:cover;
    background-position:center;
    display:flex;
    justify-content:center;
    align-items:center;
}
.logo-img{
    max-width:140px;
    background:white;
    padding:10px;
    border-radius:15px;
}
.container{
    max-width:800px;
    width:90%;
    margin-top:-30px;
    margin-bottom:50px;
}
.main-card{
    background:white;
    padding:25px;
    border-radius:20px;
}
h2{text-align:center;margin-bottom:15px;}
.grid-form{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
    gap:15px;
}
.input-group{
    display:flex;
    flex-direction:column;
}
label{
    font-size:.7rem;
    font-weight:700;
    margin-bottom:5px;
    color:#777;
    text-transform:uppercase;
}
input,select{
    padding:12px;
    border:1px solid #ddd;
    border-radius:10px;
    font-size:1rem;
}
.input-full{grid-column:1/-1;}
.services-mix{
    background:#f8f9fa;
    padding:15px;
    border-radius:15px;
    margin:20px 0;
    display:flex;
    justify-content:space-around;
}
.service-option{text-align:center;}
.service-option input{width:60px;text-align:center;}
.btn-ws{
    width:100%;
    background:var(--whatsapp);
    color:white;
    border:none;
    padding:18px;
    border-radius:12px;
    font-weight:600;
    cursor:pointer;
}
.footer-info{
    text-align:center;
    color:white;
    margin-top:15px;
    font-size:.8rem;
}
</style>
</head>

<body>

<div class="header-banner">
    <img src="logo.jpg" class="logo-img">
</div>

<div class="container">
<div class="main-card">

<h2>Gesti√≥n de Viajes TrasLaDar</h2>

<form id="formViaje">

<div class="grid-form">

<div class="input-group input-full">
<label>Nombre y Apellido</label>
<input type="text" id="nombre" placeholder="Ej: Juan P√©rez" required>
</div>

<div class="input-group input-full">
<label>Tel√©fono</label>
<input type="tel" id="telefono" placeholder="Ej: 351xxxxxxxx" required>
</div>

<div class="input-group">
<label>Origen</label>
<select id="origen"></select>
</div>

<div class="input-group">
<label>Destino</label>
<select id="destino"></select>
</div>

<div class="input-group">
<label>Fecha</label>
<input type="date" id="fecha" required>
</div>

<div class="input-group input-full">
<label>Veh√≠culo / Chofer</label>
<input type="text" id="vehiculo" required>
</div>

</div>

<div class="services-mix">
<div class="service-option">üë§<br><input type="number" id="p" value="1" min="0"></div>
<div class="service-option">üì¶<br><input type="number" id="e" value="0" min="0"></div>
<div class="service-option">üêæ<br><input type="number" id="m" value="0" min="0"></div>
</div>

<button type="button" class="btn-ws" onclick="procesar()">Registrar Viaje</button>

</form>
</div>

<div class="footer-info">Sistema Log√≠stico TrasLaDar</div>
</div>

<script>
const destinos = ["C√≥rdoba","R√≠o Cuarto","Villa Mar√≠a","Carlos Paz","Buenos Aires"];

function cargarDestinos(){
    destinos.forEach(d=>{
        origen.innerHTML += `<option value="${d}">${d}</option>`;
        destino.innerHTML += `<option value="${d}">${d}</option>`;
    });
    fecha.min = new Date().toISOString().split("T")[0];
}
cargarDestinos();

async function procesar(){
    const btn = document.querySelector(".btn-ws");

    const urlExcel = "https://script.google.com/macros/s/AKfycbwv-5wZ3sRtD4Evz0BmOe2ps6PVjDehJy08DMUq1-_YCdgX9IftxlUoalXgVvlaZPVs/exec";

    const datos = {
        nombre: nombre.value,
        telefono: telefono.value,
        fecha: fecha.value,
        origen: origen.value,
        destino: destino.value,
        vehiculo: vehiculo.value,
        pasajeros: p.value,
        encomiendas: e.value,
        mascotas: m.value
    };

    if(!datos.nombre || !datos.telefono || !datos.fecha || !datos.vehiculo){
        alert("Complet√° todos los campos obligatorios");
        return;
    }

    btn.disabled = true;
    btn.innerText = "Guardando...";

    try{
        await fetch(urlExcel,{
            method:"POST",
            mode:"no-cors",
            body:JSON.stringify(datos)
        });

        alert("‚úÖ Viaje registrado correctamente");

        document.getElementById("formViaje").reset();
        p.value = 1;
        e.value = 0;
        m.value = 0;

    }catch(err){
        alert("‚ùå Error al guardar el viaje");
    }finally{
        btn.disabled = false;
        btn.innerText = "Registrar Viaje";
    }
}
</script>

</body>
</html>
